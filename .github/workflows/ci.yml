name: CI - Lint & Format Check

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

permissions:
  contents: read

jobs:
  lint-and-format:
    name: Check HTML/CSS/JS
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v6

      - name: Setup Node.js
        uses: actions/setup-node@v6
        with:
          node-version: '22'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run ESLint (HTML/JS)
        run: npm run lint

      - name: Check Prettier formatting
        run: npx prettier --check "**/*.{html,css,js,mjs,cjs,json}" --ignore-path .gitignore

      - name: Verify HTML files exist
        run: |
          echo "Checking HTML files structure..."
          test -f demo/index.html && echo "✓ index.html found" || exit 1
          test -d demo/student/desktop && echo "✓ Student desktop pages found" || exit 1
          test -d demo/student/mobile && echo "✓ Student mobile pages found" || exit 1
          test -d demo/tutor/desktop && echo "✓ Tutor desktop pages found" || exit 1
          test -d demo/tutor/mobile && echo "✓ Tutor mobile pages found" || exit 1
